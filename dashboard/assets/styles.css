/*
Water Risk Platform - Design System
Premium Visual Polish - Enterprise Grade
Inspired by Linear, Vercel, Stripe
*/

/* ========================================
   1. CSS VARIABLES / DESIGN TOKENS
   ======================================== */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

:root {
    /* ---- Color Palette ---- */
    
    /* Backgrounds */
    --bg-primary: #FFFFFF;
    --bg-surface: #FAFBFC;
    --bg-muted: #F1F5F9;
    --bg-dark: #0A0F1A;
    --bg-dark-surface: #141B2D;
    --bg-glass: rgba(255, 255, 255, 0.7);
    --bg-glass-dark: rgba(15, 23, 42, 0.8);
    
    /* Text */
    --text-primary: #0F172A;
    --text-secondary: #475569;
    --text-muted: #94A3B8;
    --text-inverse: #FFFFFF;
    
    /* Accents - Clean solid colors */
    --accent-primary: #2563EB;
    --accent-primary-hover: #1D4ED8;
    --accent-primary-light: #DBEAFE;
    --accent-secondary: #475569;
    
    /* Borders */
    --border-default: rgba(226, 232, 240, 0.8);
    --border-strong: #CBD5E1;
    --border-focus: #2563EB;
    --border-glow: rgba(37, 99, 235, 0.5);
    
    /* Risk Level Colors */
    --risk-critical: #DC2626;
    --risk-critical-bg: rgba(254, 242, 242, 0.8);
    --risk-high: #EA580C;
    --risk-high-bg: rgba(255, 247, 237, 0.8);
    --risk-medium: #D97706;
    --risk-medium-bg: rgba(255, 251, 235, 0.8);
    --risk-low: #059669;
    --risk-low-bg: rgba(236, 253, 245, 0.8);
    
    /* Status Colors */
    --success: #059669;
    --success-bg: rgba(236, 253, 245, 0.8);
    --warning: #D97706;
    --warning-bg: rgba(255, 251, 235, 0.8);
    --error: #DC2626;
    --error-bg: rgba(254, 242, 242, 0.8);
    --info: #2563EB;
    --info-bg: rgba(239, 246, 255, 0.8);
    
    /* Glow Effects */
    --glow-primary: 0 0 30px rgba(37, 99, 235, 0.3);
    --glow-accent: 0 0 40px rgba(124, 58, 237, 0.2);
    --glow-success: 0 0 20px rgba(5, 150, 105, 0.3);
    --glow-error: 0 0 20px rgba(220, 38, 38, 0.3);
    
    /* ---- Typography ---- */
    --font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    
    /* Font Sizes */
    --text-xs: 11px;
    --text-sm: 13px;
    --text-base: 15px;
    --text-lg: 17px;
    --text-xl: 20px;
    --text-2xl: 26px;
    --text-3xl: 32px;
    --text-4xl: 40px;
    --text-5xl: 52px;
    --text-6xl: 64px;
    
    /* Font Weights */
    --font-normal: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;
    --font-extrabold: 800;
    
    /* Line Heights */
    --leading-tight: 1.1;
    --leading-snug: 1.25;
    --leading-normal: 1.5;
    --leading-relaxed: 1.625;
    
    /* ---- Spacing (Tighter) ---- */
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 20px;
    --space-6: 24px;
    --space-8: 32px;
    --space-10: 40px;
    --space-12: 48px;
    --space-16: 56px;
    --space-20: 64px;
    --space-24: 80px;
    
    /* ---- Border Radius ---- */
    --radius-sm: 4px;
    --radius-md: 6px;
    --radius-lg: 10px;
    --radius-xl: 14px;
    --radius-2xl: 20px;
    --radius-full: 9999px;
    
    /* ---- Shadows (Enhanced) ---- */
    --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04);
    --shadow-lg: 0 12px 24px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 24px 48px rgba(0, 0, 0, 0.12), 0 8px 16px rgba(0, 0, 0, 0.06);
    --shadow-glow: 0 8px 32px rgba(37, 99, 235, 0.15);
    --shadow-card: 0 1px 3px rgba(0, 0, 0, 0.04), 0 6px 16px rgba(0, 0, 0, 0.04);
    
    /* ---- Transitions ---- */
    --duration-fast: 120ms;
    --duration-base: 180ms;
    --duration-slow: 280ms;
    --duration-slower: 400ms;
    --ease-default: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-in: cubic-bezier(0.4, 0, 1, 1);
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* ========================================
   2. GLOBAL STYLES
   ======================================== */

.stApp {
    background: #F8FAFC !important;
    font-family: var(--font-family) !important;
    color: #0F172A !important;
    -webkit-text-fill-color: #0F172A;
    min-height: 100vh;
    position: relative;
}

/* Global text visibility fix */
.stApp h1, .stApp h2, .stApp h3, .stApp h4, .stApp h5, .stApp h6,
.stApp p, .stApp span, .stApp div, .stApp label {
    -webkit-text-fill-color: inherit;
}

/* Subtle dot grid pattern */
.stApp::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: radial-gradient(rgba(148, 163, 184, 0.15) 1px, transparent 1px);
    background-size: 24px 24px;
    pointer-events: none;
    z-index: 0;
    opacity: 0.5;
}

.main .block-container {
    max-width: 1100px !important;
    padding: var(--space-6) var(--space-5) !important;
    position: relative;
    z-index: 1;
}

/* Hide Streamlit branding but keep sidebar toggle */
#MainMenu { visibility: hidden; }
footer { visibility: hidden; }

/* Hide header decorations but keep functional elements */
header[data-testid="stHeader"] {
    background: transparent !important;
    border: none !important;
}

/* =============================================
   SIDEBAR TOGGLE BUTTONS - UNIFIED STYLING
   ============================================= */

/* COLLAPSE BUTTON (<<) - when sidebar is open */
[data-testid="stSidebarCollapseButton"] {
    opacity: 1 !important;
    visibility: visible !important;
    background: #FFFFFF !important;
    border: 1px solid #E2E8F0 !important;
    border-radius: 10px !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06) !important;
    padding: 8px !important;
    outline: none !important;
}

[data-testid="stSidebarCollapseButton"]:hover {
    background: #F8FAFC !important;
}

[data-testid="stSidebarCollapseButton"]:not(:hover) {
    opacity: 1 !important;
}

[data-testid="stSidebarCollapseButton"] svg,
[data-testid="stSidebarCollapseButton"] svg * {
    stroke: #64748B !important;
    color: #64748B !important;
}

/* EXPAND BUTTON (>>) - when sidebar is collapsed */
[data-testid="collapsedControl"] {
    opacity: 1 !important;
    visibility: visible !important;
    background: #FFFFFF !important;
    border: 1px solid #E2E8F0 !important;
    border-radius: 10px !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06) !important;
    padding: 8px !important;
    outline: none !important;
}

[data-testid="collapsedControl"]:hover {
    background: #F8FAFC !important;
}

[data-testid="collapsedControl"]:not(:hover) {
    opacity: 1 !important;
}

[data-testid="collapsedControl"] svg,
[data-testid="collapsedControl"] svg * {
    stroke: #64748B !important;
    color: #64748B !important;
}

/* Hide Streamlit's default page navigation in sidebar */
[data-testid="stSidebarNav"] {
    display: none !important;
}

/* Alternative selectors for different Streamlit versions */
section[data-testid="stSidebar"] > div > div > div > div > ul {
    display: none !important;
}

.css-1oe5cao {
    display: none !important;
}

/* Hide the page links container */
[data-testid="stSidebarNav"] ul {
    display: none !important;
}

/* Smooth scrolling */
html {
    scroll-behavior: smooth;
}

/* Selection color */
::selection {
    background: var(--accent-primary);
    color: var(--text-inverse);
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ========================================
   3. TYPOGRAPHY
   ======================================== */

.display-text {
    font-size: clamp(var(--text-5xl), 8vw, var(--text-6xl));
    font-weight: var(--font-bold);
    line-height: var(--leading-tight);
    letter-spacing: -0.03em;
    color: var(--text-primary) !important;
    -webkit-text-fill-color: var(--text-primary) !important;
    margin: 0;
}

h1, .stMarkdown h1 {
    font-size: var(--text-4xl) !important;
    font-weight: var(--font-semibold) !important;
    line-height: var(--leading-tight) !important;
    letter-spacing: -0.025em !important;
    color: var(--text-primary) !important;
    margin-bottom: var(--space-4) !important;
}

h2, .stMarkdown h2, .section-title {
    font-size: var(--text-2xl) !important;
    font-weight: var(--font-semibold) !important;
    line-height: var(--leading-snug) !important;
    letter-spacing: -0.015em !important;
    color: var(--text-primary) !important;
    margin-bottom: var(--space-4) !important;
}

h3, .stMarkdown h3 {
    font-size: var(--text-xl) !important;
    font-weight: var(--font-semibold) !important;
    line-height: var(--leading-snug) !important;
    color: var(--text-primary) !important;
    margin-bottom: var(--space-3) !important;
}

h4, .stMarkdown h4 {
    font-size: var(--text-lg) !important;
    font-weight: var(--font-semibold) !important;
    color: var(--text-primary) !important;
}

p, .stMarkdown p {
    font-size: var(--text-base) !important;
    font-weight: var(--font-normal) !important;
    line-height: var(--leading-relaxed) !important;
    color: var(--text-secondary) !important;
}

.text-muted {
    color: var(--text-muted) !important;
    font-size: var(--text-sm) !important;
}

.text-sm {
    font-size: var(--text-sm) !important;
}

.label {
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
}

/* ========================================
   4. HERO SECTION
   ======================================== */

.hero-section {
    min-height: 32vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-10) var(--space-5);
    margin-bottom: var(--space-6);
    background: #FFFFFF;
    backdrop-filter: blur(20px);
    position: relative;
    overflow: hidden;
    border-radius: var(--radius-2xl);
    margin-left: calc(-1 * var(--space-5));
    margin-right: calc(-1 * var(--space-5));
    margin-top: calc(-1 * var(--space-6));
    border: 1px solid var(--border-default);
    box-shadow: var(--shadow-md);
}

.hero-content {
    text-align: center;
    max-width: 720px;
    position: relative;
    z-index: 1;
}

.hero-content .display-text {
    margin-bottom: var(--space-4);
    color: #0F172A !important;
    -webkit-text-fill-color: #0F172A !important;
    font-size: clamp(var(--text-4xl), 6vw, var(--text-5xl));
    letter-spacing: -0.03em;
    line-height: 1.05;
}

.hero-content .body-large {
    font-size: var(--text-lg);
    color: #475569 !important;
    -webkit-text-fill-color: #475569 !important;
    max-width: 520px;
    margin: 0 auto var(--space-6);
    line-height: var(--leading-relaxed);
}

/* Hero stats - Glassmorphism */
.hero-stats {
    display: inline-flex;
    align-items: center;
    gap: var(--space-5);
    padding: var(--space-4) var(--space-6);
    background: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.8);
    border-radius: var(--radius-2xl);
    box-shadow: 
        0 8px 32px rgba(37, 99, 235, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

.hero-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    padding: 0 var(--space-2);
}

.hero-stat-value {
    font-size: var(--text-2xl);
    font-weight: var(--font-extrabold);
    color: #2563EB !important;
    -webkit-text-fill-color: #2563EB !important;
    line-height: 1;
}

.hero-stat-label {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: #94A3B8 !important;
    -webkit-text-fill-color: #94A3B8 !important;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.hero-stat-divider {
    width: 1px;
    height: 32px;
    background: linear-gradient(180deg, transparent, rgba(37, 99, 235, 0.2), transparent);
}

.hero-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(37, 99, 235, 0.15);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: #2563EB !important;
    -webkit-text-fill-color: #2563EB !important;
    margin-bottom: var(--space-5);
    box-shadow: 0 2px 12px rgba(37, 99, 235, 0.1);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.hero-badge span {
    color: #2563EB !important;
    -webkit-text-fill-color: #2563EB !important;
}

/* ========================================
   5. SECTIONS
   ======================================== */

.section {
    padding: var(--space-8) 0;
    position: relative;
}

.section-header {
    margin-bottom: var(--space-5);
    position: relative;
}

.section-header .section-title {
    margin-bottom: var(--space-1) !important;
    font-size: var(--text-xl) !important;
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
}

/* Accent line */
.section-header .section-title::after {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 0;
    width: 32px;
    height: 2px;
    background: var(--accent-primary);
    border-radius: var(--radius-full);
}

.section-header .section-subtitle {
    color: var(--text-muted);
    font-size: var(--text-base);
    margin-top: var(--space-2);
}

/* Section icon - Smaller and integrated */
.section-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: var(--accent-primary-light);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-3);
    box-shadow: 0 2px 8px rgba(37, 99, 235, 0.1);
    border: 1px solid rgba(37, 99, 235, 0.1);
}

/* Workflow section */
.workflow-section {
    background: #FFFFFF;
    margin-left: calc(-1 * var(--space-5));
    margin-right: calc(-1 * var(--space-5));
    padding-left: var(--space-5);
    padding-right: var(--space-5);
    padding-top: var(--space-10);
    padding-bottom: var(--space-10);
    border-radius: var(--radius-2xl);
    position: relative;
    overflow: hidden;
    border: 1px solid var(--border-default);
    box-shadow: var(--shadow-sm);
}

.dark-section {
    background: var(--bg-dark);
    color: var(--text-inverse);
    padding: var(--space-10) var(--space-6);
    margin: var(--space-8) calc(-1 * var(--space-5));
    width: calc(100% + var(--space-10));
    border-radius: var(--radius-xl);
    position: relative;
    overflow: hidden;
}

.dark-section h2,
.dark-section h3 {
    color: var(--text-inverse) !important;
    position: relative;
    z-index: 1;
}

.dark-section p {
    color: rgba(148, 163, 184, 0.9) !important;
    position: relative;
    z-index: 1;
}

/* ========================================
   6. BUTTONS
   ======================================== */

.stButton > button {
    background: var(--accent-primary) !important;
    color: var(--text-inverse) !important;
    border: none !important;
    border-radius: 0 0 var(--radius-xl) var(--radius-xl) !important;
    padding: var(--space-3) var(--space-5) !important;
    font-size: var(--text-sm) !important;
    font-weight: var(--font-semibold) !important;
    font-family: var(--font-family) !important;
    transition: all var(--duration-base) var(--ease-spring) !important;
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25) !important;
    min-height: 48px !important;
    position: relative !important;
    overflow: hidden !important;
    letter-spacing: 0.01em !important;
    margin-top: 0 !important;
}

/* Remove gap between card and button */
.stButton {
    margin-top: -1rem !important;
}

.stButton > button:hover {
    background: var(--accent-primary-hover) !important;
    box-shadow: 0 8px 24px rgba(37, 99, 235, 0.35) !important;
    transform: translateY(-2px) !important;
}

.stButton > button:active {
    transform: translateY(0) scale(0.99) !important;
    box-shadow: 0 2px 8px rgba(37, 99, 235, 0.25) !important;
}

.stButton > button:focus {
    outline: none !important;
    box-shadow: 
        0 0 0 3px rgba(37, 99, 235, 0.3),
        0 8px 24px rgba(37, 99, 235, 0.3) !important;
}

/* Secondary button style */
.stButton > button[kind="secondary"] {
    background: rgba(255, 255, 255, 0.9) !important;
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-default) !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04) !important;
}

.stButton > button[kind="secondary"]::before {
    display: none !important;
}

.stButton > button[kind="secondary"]:hover {
    background: rgba(255, 255, 255, 1) !important;
    border-color: var(--accent-primary) !important;
    box-shadow: 
        0 4px 16px rgba(37, 99, 235, 0.12),
        0 0 0 1px rgba(37, 99, 235, 0.1) !important;
    color: var(--accent-primary) !important;
}

/* Button with icon */
.btn-icon {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
}

/* ========================================
   7. CARDS
   ======================================== */

/* Base card */
.card {
    background: #FFFFFF;
    border: 1px solid var(--border-default);
    border-radius: var(--radius-xl);
    padding: var(--space-5);
    transition: all var(--duration-base) var(--ease-spring);
    box-shadow: var(--shadow-card);
    position: relative;
}

.card:hover {
    border-color: var(--border-strong);
    box-shadow: var(--shadow-lg);
    transform: translateY(-3px);
}

/* Navigation cards */
.nav-card {
    background: #FFFFFF;
    border: 1px solid var(--border-default);
    border-radius: var(--radius-2xl);
    padding: var(--space-6);
    height: 100%;
    transition: all var(--duration-slow) var(--ease-spring);
    cursor: pointer;
    min-height: 200px;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-card);
}

/* Accent line on hover */
.nav-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--accent-primary);
    opacity: 0;
    transition: opacity var(--duration-base) var(--ease-default);
}

.nav-card:hover {
    border-color: var(--accent-primary);
    box-shadow: var(--shadow-lg);
    transform: translateY(-6px);
}

.nav-card:hover::before {
    opacity: 1;
}

.nav-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-4);
    position: relative;
    z-index: 1;
}

.nav-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 52px;
    height: 52px;
    background: var(--accent-primary-light);
    border-radius: var(--radius-xl);
    color: var(--accent-primary);
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.12);
    transition: all var(--duration-base) var(--ease-spring), color var(--duration-fast) var(--ease-default);
    border: 1px solid rgba(37, 99, 235, 0.1);
}

/* Ensure SVG icons inherit color */
.nav-icon svg {
    stroke: currentColor;
    transition: stroke var(--duration-fast) var(--ease-default);
}

.nav-card:hover .nav-icon {
    background: var(--accent-primary);
    color: var(--text-inverse);
    box-shadow: 0 8px 24px rgba(37, 99, 235, 0.35);
    transform: scale(1.05);
    border-color: transparent;
}

.nav-number {
    font-size: var(--text-xl);
    font-weight: var(--font-extrabold);
    color: rgba(148, 163, 184, 0.3);
    font-family: var(--font-mono);
    transition: all var(--duration-base) var(--ease-default);
}

.nav-card:hover .nav-number {
    color: rgba(37, 99, 235, 0.2);
    transform: scale(1.1);
}

.nav-card h3 {
    font-size: var(--text-lg) !important;
    font-weight: var(--font-semibold) !important;
    margin-bottom: var(--space-2) !important;
    color: #0F172A !important;
    -webkit-text-fill-color: #0F172A !important;
    position: relative;
    z-index: 1;
    transition: color var(--duration-base) var(--ease-default);
}

.nav-card:hover h3 {
    color: #2563EB !important;
    -webkit-text-fill-color: #2563EB !important;
}

.nav-card p {
    font-size: var(--text-sm) !important;
    color: #475569 !important;
    -webkit-text-fill-color: #475569 !important;
    line-height: var(--leading-relaxed) !important;
    flex-grow: 1;
    position: relative;
    z-index: 1;
}

/* Risk cards */
.risk-card {
    background: #FFFFFF;
    border: 1px solid var(--border-default);
    border-radius: var(--radius-2xl);
    padding: var(--space-6);
    margin-bottom: var(--space-4);
    box-shadow: var(--shadow-card);
    position: relative;
    overflow: hidden;
    transition: all var(--duration-base) var(--ease-default);
}

.risk-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

/* Accent bar at top for risk level */
.risk-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
}

.risk-card.critical {
    background: var(--risk-critical-bg);
    border-color: rgba(220, 38, 38, 0.2);
}
.risk-card.critical::before {
    background: var(--risk-critical);
}

.risk-card.high {
    background: var(--risk-high-bg);
    border-color: rgba(234, 88, 12, 0.2);
}
.risk-card.high::before {
    background: var(--risk-high);
}

.risk-card.medium {
    background: var(--risk-medium-bg);
    border-color: rgba(217, 119, 6, 0.2);
}
.risk-card.medium::before {
    background: var(--risk-medium);
}

.risk-card.low {
    background: var(--risk-low-bg);
    border-color: rgba(5, 150, 105, 0.2);
}
.risk-card.low::before {
    background: var(--risk-low);
}

/* Action cards */
.action-card {
    background: #FFFFFF;
    border: 1px solid var(--border-default);
    border-radius: var(--radius-xl);
    padding: var(--space-5);
    margin-bottom: var(--space-3);
    transition: all var(--duration-base) var(--ease-spring);
    box-shadow: var(--shadow-card);
    position: relative;
}

.action-card:hover {
    border-color: var(--accent-primary);
    box-shadow: var(--shadow-lg);
    transform: translateY(-3px);
}

.action-card.selected {
    border-color: var(--accent-primary);
    background: var(--accent-primary-light);
    box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2), var(--shadow-lg);
}

.action-card.selected::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--accent-primary);
}

.action-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: var(--space-3);
    margin-bottom: var(--space-3);
}

.action-priority {
    display: inline-flex;
    align-items: center;
    padding: var(--space-1) var(--space-3);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-radius: var(--radius-full);
}

.action-priority.high {
    background: var(--risk-high-bg);
    color: var(--risk-high);
    border: 1px solid rgba(234, 88, 12, 0.2);
}

.action-priority.medium {
    background: var(--risk-medium-bg);
    color: var(--risk-medium);
    border: 1px solid rgba(217, 119, 6, 0.2);
}

.action-priority.low {
    background: var(--risk-low-bg);
    color: var(--risk-low);
    border: 1px solid rgba(5, 150, 105, 0.2);
}

/* ========================================
   8. METRICS & DATA DISPLAY
   ======================================== */

.metric-container {
    text-align: center;
    padding: var(--space-5);
}

.metric-value {
    font-size: clamp(var(--text-4xl), 5vw, var(--text-5xl));
    font-weight: var(--font-bold);
    line-height: 1;
    color: var(--text-primary);
    font-variant-numeric: tabular-nums;
}

.metric-value.critical { color: var(--risk-critical); }
.metric-value.high { color: var(--risk-high); }
.metric-value.medium { color: var(--risk-medium); }
.metric-value.low { color: var(--risk-low); }

.metric-label {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
    margin-top: var(--space-3);
}

.metric-delta {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    margin-top: var(--space-1);
}

.metric-delta.positive {
    color: var(--success);
}

.metric-delta.negative {
    color: var(--error);
}

/* Stat card */
.stat-card {
    background: linear-gradient(135deg, var(--bg-surface) 0%, #F1F5F9 100%);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    text-align: left;
    border: 1px solid var(--border-default);
    position: relative;
    overflow: hidden;
}

/* Subtle decorative element */
.stat-card::after {
    content: '';
    position: absolute;
    top: -20px;
    right: -20px;
    width: 80px;
    height: 80px;
    background: radial-gradient(circle, rgba(37, 99, 235, 0.06) 0%, transparent 70%);
    pointer-events: none;
}

.stat-card .stat-label {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--text-muted);
    margin-bottom: var(--space-2);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.stat-card .stat-value {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    color: var(--text-primary);
    position: relative;
    z-index: 1;
}

/* SPI Gauge */
.spi-gauge-container {
    padding: var(--space-4) 0;
}

.spi-gauge {
    position: relative;
    width: 100%;
    height: 8px;
    background: linear-gradient(to right,
        var(--risk-critical) 0%,
        var(--risk-critical) 16.67%,
        var(--risk-high) 16.67%,
        var(--risk-high) 33.33%,
        var(--risk-medium) 33.33%,
        var(--risk-medium) 50%,
        var(--risk-low) 50%,
        var(--risk-low) 100%
    );
    border-radius: var(--radius-full);
}

.spi-marker {
    position: absolute;
    top: -4px;
    width: 4px;
    height: 16px;
    background-color: var(--text-primary);
    border-radius: var(--radius-sm);
    transform: translateX(-50%);
    box-shadow: var(--shadow-sm);
}

.spi-labels {
    display: flex;
    justify-content: space-between;
    margin-top: var(--space-2);
    font-size: var(--text-xs);
    color: var(--text-muted);
}

/* ========================================
   9. SELECTION BADGE
   ======================================== */

.selection-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-3) var(--space-5);
    background: #FFFFFF;
    border: 1px solid var(--border-default);
    border-radius: var(--radius-full);
    margin: var(--space-6) 0;
    box-shadow: var(--shadow-card);
    position: relative;
}

.badge-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--text-secondary);
}

.badge-item strong {
    color: var(--accent-primary);
    font-weight: var(--font-semibold);
}

.badge-divider {
    width: 1px;
    height: 20px;
    background: var(--border-default);
}

/* Zone/Profile selector buttons */
.selector-btn {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-5);
    background: #FFFFFF;
    border: 1px solid var(--border-default);
    border-radius: var(--radius-xl);
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    color: var(--text-primary);
    cursor: pointer;
    transition: all var(--duration-base) var(--ease-spring);
    width: 100%;
    min-height: 88px;
    box-shadow: var(--shadow-card);
    position: relative;
    overflow: hidden;
}

.selector-btn:hover {
    border-color: var(--accent-primary);
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
}

.selector-btn.active {
    border-color: var(--accent-primary);
    background: var(--accent-primary-light);
    color: var(--accent-primary);
    box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2), var(--shadow-lg);
}

.selector-btn.active::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--accent-primary);
}

.selector-btn .icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    background: var(--bg-muted);
    border-radius: var(--radius-lg);
    color: var(--text-muted);
    flex-shrink: 0;
    border: 1px solid var(--border-default);
    transition: all var(--duration-base) var(--ease-spring);
}

.selector-btn:hover .icon {
    background: var(--accent-primary-light);
    border-color: rgba(37, 99, 235, 0.15);
    color: var(--accent-primary);
}

.selector-btn.active .icon {
    background: var(--accent-primary);
    color: var(--text-inverse);
    box-shadow: 0 4px 16px rgba(37, 99, 235, 0.35);
    border-color: transparent;
}

/* ========================================
   10. FORMS & INPUTS
   ======================================== */

.stSelectbox > div > div {
    background-color: var(--bg-primary) !important;
    border: 1px solid var(--border-default) !important;
    border-radius: var(--radius-md) !important;
    font-family: var(--font-family) !important;
}

/* Make selectbox text visible */
.stSelectbox > div > div > div {
    color: var(--text-primary) !important;
}

.stSelectbox [data-baseweb="select"] > div {
    color: var(--text-primary) !important;
}

.stSelectbox [data-baseweb="select"] span {
    color: var(--text-primary) !important;
}

/* Selectbox value text */
.stSelectbox [data-testid="stMarkdownContainer"] p,
.stSelectbox div[data-baseweb="select"] > div > div > div {
    color: var(--text-primary) !important;
    font-weight: var(--font-medium) !important;
}

/* Ensure all selectbox text is visible */
[data-baseweb="select"] {
    color: var(--text-primary) !important;
}

[data-baseweb="select"] * {
    color: var(--text-primary) !important;
}

/* Override any light/placeholder coloring */
.stSelectbox div[data-baseweb="select"] div[aria-selected="true"],
.stSelectbox div[data-baseweb="select"] [data-testid="stMarkdownContainer"],
.stSelectbox [class*="valueContainer"] {
    color: var(--text-primary) !important;
    opacity: 1 !important;
}

/* Dropdown arrow */
.stSelectbox svg {
    color: var(--text-muted) !important;
    fill: var(--text-muted) !important;
}

.stSelectbox > div > div:focus-within {
    border-color: var(--accent-primary) !important;
    box-shadow: 0 0 0 3px var(--accent-primary-light) !important;
}

.stTextInput > div > div > input {
    background-color: var(--bg-primary) !important;
    border: 1px solid var(--border-default) !important;
    border-radius: var(--radius-md) !important;
    font-family: var(--font-family) !important;
    font-size: var(--text-base) !important;
    padding: var(--space-3) var(--space-4) !important;
}

.stTextInput > div > div > input:focus {
    border-color: var(--accent-primary) !important;
    box-shadow: 0 0 0 3px var(--accent-primary-light) !important;
}

/* Checkbox */
.stCheckbox > label {
    font-family: var(--font-family) !important;
    font-size: var(--text-base) !important;
    color: var(--text-primary) !important;
}

.stCheckbox > label > span[data-baseweb="checkbox"] {
    border-radius: var(--radius-sm) !important;
}

/* Slider */
.stSlider > div > div > div {
    background-color: var(--bg-muted) !important;
}

.stSlider > div > div > div > div {
    background-color: var(--accent-primary) !important;
}

/* ========================================
   11. TABLES
   ======================================== */

.stDataFrame {
    border: 1px solid var(--border-default) !important;
    border-radius: var(--radius-lg) !important;
    overflow: hidden;
}

.stDataFrame thead th {
    background-color: var(--bg-surface) !important;
    color: var(--text-primary) !important;
    font-weight: var(--font-semibold) !important;
    font-size: var(--text-sm) !important;
    text-transform: none !important;
    border-bottom: 1px solid var(--border-default) !important;
}

.stDataFrame tbody td {
    font-size: var(--text-sm) !important;
    border-bottom: 1px solid var(--border-default) !important;
}

/* ========================================
   12. FOOTER
   ======================================== */

.footer-section {
    background: var(--bg-dark);
    color: var(--text-inverse);
    padding: var(--space-12) var(--space-6);
    margin: var(--space-10) calc(-1 * var(--space-5)) 0;
    width: calc(100% + var(--space-10));
    text-align: center;
    border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
    position: relative;
    overflow: hidden;
}

.footer-tagline {
    font-size: var(--text-sm) !important;
    font-weight: var(--font-semibold) !important;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: #94A3B8 !important;
    -webkit-text-fill-color: #94A3B8 !important;
    margin-bottom: var(--space-2) !important;
    position: relative;
    z-index: 1;
}

.footer-subtitle {
    font-size: var(--text-sm) !important;
    color: rgba(148, 163, 184, 0.5) !important;
    -webkit-text-fill-color: rgba(148, 163, 184, 0.5) !important;
    position: relative;
    z-index: 1;
}

/* ========================================
   13. ANIMATIONS
   ======================================== */

/* Fade in with slide */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(16px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(24px) scale(0.98);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes fadeInScale {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.fade-in {
    animation: fadeIn var(--duration-slow) var(--ease-out) forwards;
}

.fade-in-up {
    animation: fadeInUp var(--duration-slower) var(--ease-spring) forwards;
}

.fade-in-scale {
    animation: fadeInScale var(--duration-slow) var(--ease-spring) forwards;
}

/* Staggered animation delays - More entries */
.stagger > *:nth-child(1) { animation-delay: 0ms; }
.stagger > *:nth-child(2) { animation-delay: 60ms; }
.stagger > *:nth-child(3) { animation-delay: 120ms; }
.stagger > *:nth-child(4) { animation-delay: 180ms; }
.stagger > *:nth-child(5) { animation-delay: 240ms; }
.stagger > *:nth-child(6) { animation-delay: 300ms; }
.stagger > *:nth-child(7) { animation-delay: 360ms; }
.stagger > *:nth-child(8) { animation-delay: 420ms; }

/* Pulse animation */
@keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(0.98); }
}

.pulse {
    animation: pulse 2s var(--ease-default) infinite;
}

/* Glow pulse for critical elements */
@keyframes glowPulse {
    0%, 100% { box-shadow: 0 0 20px rgba(220, 38, 38, 0.3); }
    50% { box-shadow: 0 0 40px rgba(220, 38, 38, 0.5); }
}

.glow-pulse {
    animation: glowPulse 2s ease-in-out infinite;
}

/* Skeleton loading - Enhanced */
.skeleton {
    background: linear-gradient(
        90deg,
        rgba(148, 163, 184, 0.1) 0%,
        rgba(148, 163, 184, 0.2) 50%,
        rgba(148, 163, 184, 0.1) 100%
    );
    background-size: 200% 100%;
    animation: skeleton-loading 1.2s ease-in-out infinite;
    border-radius: var(--radius-md);
}

@keyframes skeleton-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* Subtle hover lift - Enhanced */
.hover-lift {
    transition: transform var(--duration-base) var(--ease-spring),
                box-shadow var(--duration-base) var(--ease-default);
}

.hover-lift:hover {
    transform: translateY(-4px) scale(1.01);
    box-shadow: var(--shadow-lg);
}

/* Icon styles */
.icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: middle;
    transition: transform var(--duration-fast) var(--ease-spring);
}

.icon:hover {
    transform: scale(1.1);
}

.icon-spin {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Shimmer effect */
@keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

.shimmer {
    background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(255, 255, 255, 0.4) 50%,
        transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
}

/* Float animation for decorative elements */
@keyframes float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    33% { transform: translateY(-8px) rotate(1deg); }
    66% { transform: translateY(4px) rotate(-1deg); }
}

.float {
    animation: float 6s ease-in-out infinite;
}

/* Scale on tap for mobile */
.tap-scale:active {
    transform: scale(0.97);
}


/* ========================================
   14. COMPARISON SECTION
   ======================================== */

.comparison-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-5);
    margin: var(--space-6) 0;
}

.comparison-card {
    padding: var(--space-6);
    border-radius: var(--radius-2xl);
    border: 1px solid var(--border-default);
    position: relative;
    overflow: hidden;
    transition: all var(--duration-base) var(--ease-default);
}

.comparison-card:hover {
    transform: translateY(-2px);
}

.comparison-card.no-action {
    background: var(--risk-critical-bg);
    border-color: rgba(220, 38, 38, 0.2);
}

.comparison-card.no-action::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--risk-critical);
}

.comparison-card.with-action {
    background: var(--bg-dark);
    color: var(--text-inverse);
    border-color: var(--bg-dark);
    box-shadow: 0 12px 40px rgba(15, 23, 42, 0.4);
}

.comparison-card.with-action::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--success);
}

.comparison-card.with-action h3,
.comparison-card.with-action .metric-value {
    color: var(--text-inverse) !important;
    position: relative;
    z-index: 1;
}

.comparison-card.with-action p,
.comparison-card.with-action .metric-label {
    color: rgba(148, 163, 184, 0.9) !important;
    position: relative;
    z-index: 1;
}

.comparison-label {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
    margin-bottom: var(--space-4);
    position: relative;
    z-index: 1;
}

/* Delta indicators */
.delta-positive {
    color: var(--success);
    font-weight: var(--font-semibold);
}

.delta-negative {
    color: var(--error);
    font-weight: var(--font-semibold);
}

.delta-highlight {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-3);
    background: var(--success-bg);
    color: var(--success);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    border: 1px solid rgba(5, 150, 105, 0.2);
}

/* ========================================
   15. SIDEBAR STYLING
   ======================================== */

[data-testid="stSidebar"] {
    background: #FFFFFF !important;
    border-right: 1px solid var(--border-default) !important;
}

[data-testid="stSidebar"] > div:first-child {
    padding-top: var(--space-6) !important;
}

[data-testid="stSidebar"] .stMarkdown h1,
[data-testid="stSidebar"] .stMarkdown h2,
[data-testid="stSidebar"] .stMarkdown h3 {
    color: #0F172A !important;
    -webkit-text-fill-color: #0F172A !important;
    font-weight: var(--font-semibold) !important;
}

[data-testid="stSidebar"] .stMarkdown p,
[data-testid="stSidebar"] label {
    color: #475569 !important;
    -webkit-text-fill-color: #475569 !important;
    font-size: var(--text-sm) !important;
}

[data-testid="stSidebar"] .stSelectbox label {
    color: #94A3B8 !important;
    -webkit-text-fill-color: #94A3B8 !important;
    font-size: var(--text-xs) !important;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Sidebar text visibility fix */
[data-testid="stSidebar"] div,
[data-testid="stSidebar"] span,
[data-testid="stSidebar"] p {
    -webkit-text-fill-color: inherit;
}

/* Sidebar selectbox value text - ensure visibility */
[data-testid="stSidebar"] .stSelectbox [data-baseweb="select"] {
    color: var(--text-primary) !important;
}

[data-testid="stSidebar"] .stSelectbox [data-baseweb="select"] span,
[data-testid="stSidebar"] .stSelectbox [data-baseweb="select"] div {
    color: var(--text-primary) !important;
    font-weight: var(--font-medium) !important;
}

[data-testid="stSidebar"] .stSelectbox > div > div {
    background-color: var(--bg-surface) !important;
    border: 1px solid var(--border-default) !important;
}

[data-testid="stSidebar"] .stSelectbox > div > div:hover {
    border-color: var(--accent-primary) !important;
}

/* Sidebar navigation items */
.sidebar-nav-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-lg);
    color: var(--text-secondary);
    text-decoration: none;
    transition: all var(--duration-fast) var(--ease-default);
    margin-bottom: var(--space-1);
    cursor: pointer;
    border: 1px solid transparent;
}

.sidebar-nav-item:hover {
    background: rgba(37, 99, 235, 0.06);
    color: var(--accent-primary);
    border-color: rgba(37, 99, 235, 0.1);
}

.sidebar-nav-item.active {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, rgba(124, 58, 237, 0.06) 100%);
    color: var(--accent-primary);
    font-weight: var(--font-medium);
    border-color: rgba(37, 99, 235, 0.15);
}

.sidebar-nav-item .nav-icon {
    width: 20px;
    height: 20px;
    opacity: 0.7;
}

.sidebar-nav-item:hover .nav-icon,
.sidebar-nav-item.active .nav-icon {
    opacity: 1;
}

/* Sidebar divider */
.sidebar-divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--border-default), transparent);
    margin: var(--space-4) 0;
}

/* Sidebar context badge */
.sidebar-context {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-lg);
    padding: var(--space-3);
    margin-bottom: var(--space-4);
}

.sidebar-context-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-2) 0;
    font-size: var(--text-sm);
}

.sidebar-context-label {
    color: var(--text-muted);
    font-size: var(--text-xs);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.sidebar-context-value {
    color: var(--text-primary);
    font-weight: var(--font-medium);
}

/* ========================================
   16. EXPANDER
   ======================================== */

.streamlit-expanderHeader {
    font-weight: var(--font-medium) !important;
    font-size: var(--text-base) !important;
    background-color: var(--bg-surface) !important;
    border: 1px solid var(--border-default) !important;
    border-radius: var(--radius-lg) !important;
    padding: var(--space-4) !important;
}

.streamlit-expanderHeader:hover {
    border-color: var(--border-strong) !important;
}

.streamlit-expanderContent {
    border: 1px solid var(--border-default) !important;
    border-top: none !important;
    border-radius: 0 0 var(--radius-lg) var(--radius-lg) !important;
    padding: var(--space-4) !important;
}

/* ========================================
   17. PROGRESS INDICATORS
   ======================================== */

.stProgress > div > div {
    background-color: var(--bg-muted) !important;
    border-radius: var(--radius-full) !important;
    height: 8px !important;
}

.stProgress > div > div > div {
    background-color: var(--accent-primary) !important;
    border-radius: var(--radius-full) !important;
}

/* ========================================
   18. ALERTS & INFO BOXES
   ======================================== */

.stAlert {
    border-radius: var(--radius-lg) !important;
    border: 1px solid var(--border-default) !important;
    padding: var(--space-4) !important;
}

.alert {
    padding: var(--space-4);
    border-radius: var(--radius-lg);
    border: 1px solid;
}

.alert.info {
    background-color: var(--info-bg);
    border-color: var(--info);
    color: var(--info);
}

.alert.success {
    background-color: var(--success-bg);
    border-color: var(--success);
    color: var(--success);
}

.alert.warning {
    background-color: var(--warning-bg);
    border-color: var(--warning);
    color: var(--warning);
}

.alert.error {
    background-color: var(--error-bg);
    border-color: var(--error);
    color: var(--error);
}

/* ========================================
   19. TREND INDICATORS
   ======================================== */

.trend-indicator {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
}

.trend-indicator.improving {
    color: var(--success);
}

.trend-indicator.worsening {
    color: var(--error);
}

.trend-indicator.stable {
    color: var(--text-muted);
}

/* ========================================
   20. RESPONSIVE ADJUSTMENTS
   ======================================== */

@media (max-width: 768px) {
    .main .block-container {
        padding: var(--space-4) var(--space-3) !important;
    }
    
    .hero-section {
        min-height: auto;
        padding: var(--space-8) var(--space-4);
        margin-left: calc(-1 * var(--space-3));
        margin-right: calc(-1 * var(--space-3));
        border-radius: 0 0 var(--radius-xl) var(--radius-xl);
    }
    
    .hero-stats {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        gap: var(--space-3);
        padding: var(--space-3) var(--space-4);
    }
    
    .hero-stat {
        padding: 0 var(--space-1);
    }
    
    .hero-stat-divider {
        width: 1px;
        height: 24px;
    }

    .comparison-container {
        grid-template-columns: 1fr;
        gap: var(--space-4);
    }

    .selection-badge {
        flex-direction: row;
        flex-wrap: wrap;
        gap: var(--space-2);
        justify-content: center;
        padding: var(--space-3);
    }

    .badge-divider {
        display: none;
    }
    
    .display-text {
        font-size: var(--text-3xl) !important;
    }
    
    .hero-content .body-large {
        font-size: var(--text-base);
    }
    
    .nav-card {
        padding: var(--space-5);
        min-height: 160px;
    }
    
    .nav-icon {
        width: 44px;
        height: 44px;
    }
    
    .nav-number {
        font-size: var(--text-lg);
    }
    
    .selector-btn {
        padding: var(--space-4);
        min-height: 72px;
        gap: var(--space-3);
    }
    
    .selector-btn .icon {
        width: 40px;
        height: 40px;
    }
    
    .section {
        padding: var(--space-6) 0;
    }
    
    .section-icon {
        width: 36px;
        height: 36px;
    }
    
    .section-header .section-title {
        font-size: var(--text-lg) !important;
    }
    
    .workflow-section {
        margin-left: calc(-1 * var(--space-3));
        margin-right: calc(-1 * var(--space-3));
        padding: var(--space-6) var(--space-4);
        border-radius: var(--radius-xl);
    }
    
    .dark-section {
        padding: var(--space-8) var(--space-4);
        margin: var(--space-6) calc(-1 * var(--space-3));
        width: calc(100% + var(--space-6));
        border-radius: var(--radius-lg);
    }
    
    .footer-section {
        padding: var(--space-8) var(--space-4);
        margin-left: calc(-1 * var(--space-3));
        margin-right: calc(-1 * var(--space-3));
        width: calc(100% + var(--space-6));
    }
    
    .card, .risk-card, .action-card {
        padding: var(--space-4);
    }
    
    .comparison-card {
        padding: var(--space-5);
    }
}

/* Extra small screens */
@media (max-width: 480px) {
    .hero-stats {
        gap: var(--space-2);
    }
    
    .hero-stat-value {
        font-size: var(--text-xl);
    }
    
    .hero-stat-label {
        font-size: 10px;
    }
    
    .display-text {
        font-size: var(--text-2xl) !important;
    }
}

/* ========================================
   21. UTILITY CLASSES
   ======================================== */

.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.gap-2 { gap: var(--space-2); }
.gap-4 { gap: var(--space-4); }
.gap-6 { gap: var(--space-6); }

.mt-2 { margin-top: var(--space-2); }
.mt-4 { margin-top: var(--space-4); }
.mt-6 { margin-top: var(--space-6); }
.mt-8 { margin-top: var(--space-8); }
.mb-2 { margin-bottom: var(--space-2); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-6 { margin-bottom: var(--space-6); }
.mb-8 { margin-bottom: var(--space-8); }

.p-4 { padding: var(--space-4); }
.p-6 { padding: var(--space-6); }
.py-4 { padding-top: var(--space-4); padding-bottom: var(--space-4); }
.px-4 { padding-left: var(--space-4); padding-right: var(--space-4); }

.rounded-lg { border-radius: var(--radius-lg); }
.rounded-full { border-radius: var(--radius-full); }

.border { border: 1px solid var(--border-default); }
.border-0 { border: none; }

.bg-surface { background-color: var(--bg-surface); }
.bg-muted { background-color: var(--bg-muted); }

/* ========================================
   22. TEXT VISIBILITY FIX (CRITICAL)
   Ensures all text is visible in WebKit browsers
   ======================================== */

/* Reset webkit-text-fill-color for all text elements */
.stApp *:not(svg):not(path) {
    -webkit-text-fill-color: currentColor;
}

/* Ensure markdown content text is visible */
[data-testid="stMarkdownContainer"] h1,
[data-testid="stMarkdownContainer"] h2,
[data-testid="stMarkdownContainer"] h3,
[data-testid="stMarkdownContainer"] h4,
[data-testid="stMarkdownContainer"] h5,
[data-testid="stMarkdownContainer"] h6 {
    color: #0F172A !important;
    -webkit-text-fill-color: #0F172A !important;
}

[data-testid="stMarkdownContainer"] p {
    color: #475569 !important;
    -webkit-text-fill-color: #475569 !important;
}

[data-testid="stMarkdownContainer"] span {
    -webkit-text-fill-color: inherit !important;
}

/* Inline HTML text visibility */
.stApp div[style*="color"] {
    -webkit-text-fill-color: inherit !important;
}

/* Ensure all direct color specifications work */
.stApp [style*="color: #0F172A"],
.stApp [style*="color:#0F172A"] {
    -webkit-text-fill-color: #0F172A !important;
}

.stApp [style*="color: #475569"],
.stApp [style*="color:#475569"] {
    -webkit-text-fill-color: #475569 !important;
}

.stApp [style*="color: #64748B"],
.stApp [style*="color:#64748B"] {
    -webkit-text-fill-color: #64748B !important;
}

.stApp [style*="color: #94A3B8"],
.stApp [style*="color:#94A3B8"] {
    -webkit-text-fill-color: #94A3B8 !important;
}
